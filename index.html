<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>WhatsApp QR Pairing</title>
<style>
  body {
    background:#0f172a;
    color:white;
    font-family:poppins, sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    margin:0;
  }
  #qr {
    width:260px;
    height:260px;
    border-radius:20px;
    padding:20px;
    background:white;
    box-shadow:0 0 40px rgba(255,255,255,0.2);
  }
  input {
    padding:12px;
    border:none;
    border-radius:10px;
    width:240px;
    margin-bottom:20px;
    font-size:16px;
    outline:none;
  }
  #errBox {
    background:#b91c1c;
    color:white;
    padding:12px 18px;
    border-radius:10px;
    margin-top:20px;
    max-width:300px;
    display:none;
    font-size:15px;
  }
  h2{margin-bottom:15px;}
</style>
</head>
<body>

<input id="session" placeholder="Enter session ID"/>
<h2>Scan WhatsApp QR</h2>
<img id="qr"/>
<div id="errBox"></div>

<script>
const session = document.getElementById("session");
const qrImg   = document.getElementById("qr");
const errBox  = document.getElementById("errBox");

session.addEventListener("change", loadQR);

async function loadQR(){
  if(!session.value) return;
  qrImg.src = "";
  errBox.style.display = "none";

  const res = await fetch(`/qr/${session.value}`);
  const data = await res.json();

  if(data.error){
    errBox.innerText = data.error;
    errBox.style.display = "block";
  }

  if(data.qr){
    qrImg.src = data.qr;
  }
}
</script>

</body>
</html>
